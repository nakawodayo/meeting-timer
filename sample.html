<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>アジェンダ入力</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .agenda-container {
        max-width: 500px;
        margin: auto;
      }
      .agenda-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      input[type="text"],
      input[type="number"] {
        padding: 5px;
        margin-right: 10px;
      }
      .timer-list {
        margin-top: 20px;
      }
      .timer-item {
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 5px;
        background-color: #f9f9f9;
      }
    </style>
  </head>
  <body>
    <div class="agenda-container">
      <h2>アジェンダ入力</h2>
      <div id="agenda-list"></div>
      <button onclick="addAgendaItem()">アジェンダ追加</button>
      <button onclick="generateTimers()">タイマー生成</button>

      <h2>タイマー一覧</h2>
      <div id="timer-list" class="timer-list"></div>
    </div>

    <script>
      function addAgendaItem() {
        const agendaList = document.getElementById("agenda-list");
        const div = document.createElement("div");
        div.classList.add("agenda-item");
        div.innerHTML = `
                <input type="text" placeholder="トピック名">
                <input type="number" placeholder="時間(分)" min="1">
                <button onclick="this.parentElement.remove()">削除</button>
            `;
        agendaList.appendChild(div);
      }

      function generateTimers() {
        const agendaList = document.querySelectorAll(".agenda-item");
        const timerList = document.getElementById("timer-list");
        timerList.innerHTML = "";

        agendaList.forEach((item) => {
          const topic = item.children[0].value;
          const time = item.children[1].value;
          if (topic && time) {
            const div = document.createElement("div");
            div.classList.add("timer-item");
            div.innerHTML = `<strong>${topic}</strong> - ${time}分 <button onclick="startTimer(this, ${time})">開始</button>`;
            timerList.appendChild(div);
          }
        });
      }

      function startTimer(button, minutes) {
        button.disabled = true;
        let time = minutes * 60;
        const timerDiv = button.parentElement;
        const interval = setInterval(() => {
          time--;
          let min = Math.floor(time / 60);
          let sec = time % 60;
          timerDiv.innerHTML = `<strong>${timerDiv.children[0].innerText}</strong> - ${min}:${
            sec < 10 ? "0" : ""
          }${sec}分`;
          if (time <= 0) {
            clearInterval(interval);
            timerDiv.innerHTML += " <span style='color:red;'>終了</span>";
          }
        }, 1000);
      }
    </script>
  </body>
</html>
